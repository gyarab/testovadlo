#!/bin/bash

[[ -f /data/.mainclass ]] ||  { echo -e "\n$ java\nChyba: program není možno spustit, neboť se jej nepodařilo zkompilovat"; exit 11; }
[[ $(cat /data/.mainclass | wc -l) -ne 0 ]] ||  { echo -e "\n$ java ...\nChyba: program není možno spustit, neboť chybí metoda main()"; exit 11; }
main=$(head -1 /data/.mainclass)

read -r -d '' input <<- EOF
Jan Lana
Pepa Zdepa
Jara Cimrman
Kejchal Trpaslik
Premysl Orac
Ruzenka Sipkova
Bozena Nemcova
Anezka Ceska
Marie Terezie
Eliska Pomoranska
EOF

read -r -d '' output <<- EOF
Anezka Ceska
Bozena Nemcova
Eliska Pomoranska
Jan Lana
Jara Cimrman
Kejchal Trpaslik
Marie Terezie
Pepa Zdepa
Premysl Orac
Ruzenka Sipkova

Anezka Ceska
Jara Cimrman
Jan Lana
Bozena Nemcova
Premysl Orac
Eliska Pomoranska
Ruzenka Sipkova
Marie Terezie
Pepa Zdepa
Kejchal Trpaslik
EOF


echo "$ java $main"
echo "// ===== vstup ====="
cat <<<"$input"

out1=$(cd /data/build; java "$main" <<<"$input") || exit 11
echo "// ===== vystup ====="
head -c 800 <<<"$out1"

[[ $(xargs <<<"$out1") == $(xargs <<<"$output") ]] || { echo "chyba: spatne poradi"; exit 11; }

#[[ $out1 != $out2 ]] || { echo "program nevrací náhodná čísla, dvakrát vrátil to samé"; exit 11; }
